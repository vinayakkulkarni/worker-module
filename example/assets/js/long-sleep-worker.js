function sleep(ms) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}

addEventListener('message', async (event) => {
  const sleepTime = event.data.message.sleep;
  await sleep(sleepTime);
  const { type } = event.data.message;
  if (type === 'geojson') {
    const featureCollection = {
      type: 'FeatureCollection',
      features: [
        {
          geometry: {
            coordinates: [
              [
                [70.845961365, 22.374668425],
                [70.847812846, 22.373658031],
                [70.850393459, 22.372146363],
                [70.852921687, 22.370560014],
                [70.855395032, 22.368900554],
                [70.857811053, 22.367169623],
                [70.860167363, 22.365368931],
                [70.862461637, 22.363500258],
                [70.86469161, 22.361565452],
                [70.866855081, 22.359566424],
                [70.868949916, 22.35750515],
                [70.870974049, 22.355383666],
                [70.872925482, 22.35320407],
                [70.874802291, 22.350968514],
                [70.876602627, 22.348679207],
                [70.878324714, 22.346338411],
                [70.879966856, 22.343948438],
                [70.881527434, 22.341511649],
                [70.883004913, 22.339030452],
                [70.884397836, 22.336507296],
                [70.885704834, 22.333944675],
                [70.886924621, 22.331345118],
                [70.888055996, 22.328711192],
                [70.889097848, 22.3260455],
                [70.890049154, 22.323350672],
                [70.89090898, 22.320629369],
                [70.891676482, 22.317884279],
                [70.892350907, 22.315118111],
                [70.892931597, 22.312333596],
                [70.893417984, 22.309533483],
                [70.893809592, 22.306720534],
                [70.894106042, 22.303897528],
                [70.894307046, 22.301067249],
                [70.894412412, 22.298232491],
                [70.894418491, 22.29644199],
                [70.7974, 22.2965],
                [70.845961365, 22.374668425],
              ],
            ],
            type: 'Polygon',
          },
          properties: {
            type: 'coverage',
          },
          type: 'Feature',
        },
      ],
    };
    postMessage(featureCollection);
  }
});
